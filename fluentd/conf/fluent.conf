<system>
  <log>
    format json
    time_format %Y-%m-%d %H:%M:%S
  </log>
</system>

<source>
  @type http
  port 9880
  bind 0.0.0.0
</source>

<match **>
  @type elasticsearch
  host elasticsearch
  port 9200
  index_name ${tag}
  logstash_format false
  include_tag_key true
  type_name _doc
  include_timestamp
  tag_key @log_name
  flush_interval 1s

  # elastic search ssl
  scheme https
  ssl_verify true
  ca_file /fluentd/etc/elastic-ca.pem
  user elastic
  password elastic_password
</match>